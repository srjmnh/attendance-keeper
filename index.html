<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Management System</title>
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <!-- Bootstrap CSS (Optional for styling tabs) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- CSRF Token -->
    <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body>
    <div class="container mt-5">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="attendance-tab" data-bs-toggle="tab" data-bs-target="#attendance" type="button" role="tab" aria-controls="attendance" aria-selected="true">Attendance</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="subjects-tab" data-bs-toggle="tab" data-bs-target="#subjects" type="button" role="tab" aria-controls="subjects" aria-selected="false">Subjects</button>
            </li>
            <!-- Add more tabs as needed -->
        </ul>

        <!-- Tab panes -->
        <div class="tab-content" id="myTabContent">
            <!-- Attendance Tab -->
            <div class="tab-pane fade show active" id="attendance" role="tabpanel" aria-labelledby="attendance-tab">
                <h3 class="mt-3">Attendance Records</h3>
                <!-- Filter Section -->
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label class="form-label">Student ID</label>
                        <input type="text" id="filter_student_id" class="form-control" placeholder="e.g., 1234">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Subject ID</label>
                        <input type="text" id="filter_subject_id" class="form-control" placeholder="e.g., Math101">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Start Date</label>
                        <input type="date" id="filter_start" class="form-control">
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">End Date</label>
                        <input type="date" id="filter_end" class="form-control">
                    </div>
                </div>
                <button onclick="loadAttendance()" class="btn btn-primary mb-3">Apply Filters</button>

                <table id="attendanceTable" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th>Document ID</th>
                            <th>Student ID</th>
                            <th>Name</th>
                            <th>Subject ID</th>
                            <th>Subject Name</th>
                            <th>Timestamp</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                </table>

                <div class="mt-3">
                    <button class="btn btn-warning" onclick="saveEdits()">Save Changes</button>
                    <button class="btn btn-secondary" onclick="downloadExcel()">Download Excel</button>
                    <button class="btn btn-link" onclick="downloadTemplate()">Download Template</button>
                    <label class="form-label d-block mt-3">Upload Excel (template must match columns):</label>
                    <input type="file" id="excelFile" accept=".xlsx" class="form-control mb-2" />
                    <button class="btn btn-dark" onclick="uploadExcel()">Upload Excel</button>
                </div>
            </div>

            <!-- Subjects Tab -->
            <div class="tab-pane fade" id="subjects" role="tabpanel" aria-labelledby="subjects-tab">
                <h3 class="mt-3">Subjects</h3>
                <ul id="subjects_list" class="list-group mb-3">
                    <!-- Subject items will be populated here -->
                </ul>
                <div id="subject_result"></div>
                <div class="input-group mb-3">
                    <input type="text" id="subject_name" class="form-control" placeholder="Enter Subject Name">
                    <button onclick="addSubject()" class="btn btn-primary">Add Subject</button>
                </div>
            </div>

            <!-- Add more tab panes as needed -->
        </div>
    </div>

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <!-- Bootstrap JS (Optional for tabs functionality) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom Scripts -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>